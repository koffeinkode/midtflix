generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Film {
  id          Int      @id @default(autoincrement())
  title       String
  titleNo     String?
  year        Int
  duration    Int?
  genre       String[]
  type        FilmType
  synopsis    String   @db.Text
  posterUrl   String?
  region      String
  language    String   @default("Norsk")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  credits     Credit[]
}

enum FilmType {
  SPILLEFILM
  DOKUMENTAR
  KORTFILM
  ANIMASJON
}

model Person {
  id          Int      @id @default(autoincrement())
  name        String
  birthYear   Int?
  bio         String?  @db.Text
  photoUrl    String?
  region      String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  credits     Credit[]
}

model Credit {
  id          Int        @id @default(autoincrement())
  role        CreditRole
  character   String?

  filmId      Int
  film        Film       @relation(fields: [filmId], references: [id], onDelete: Cascade)

  personId    Int
  person      Person     @relation(fields: [personId], references: [id], onDelete: Cascade)

  @@unique([filmId, personId, role])
}

enum CreditRole {
  REGISSOR
  PRODUSENT
  MANUS
  FOTO
  KLIPP
  MUSIKK
  SKUESPILLER
}
